---
layout: post
cid: 174
title: 字符串哈希
slug: 174
date: 2023/02/02 16:36:57
updated: 2023/02/02 16:36:57
status: publish
author: mi0e
categories: 
  - 算法
  - C/C++
tags: 
  - 模板
customSummary: 
mathjax: auto
noThumbInfoEmoji: 
noThumbInfoStyle: default
outdatedNotice: no
parseWay: auto
reprint: standard
thumb: 
thumbChoice: default
thumbDesc: 
thumbSmall: 
thumbStyle: default
---


```cpp
#include<bits/stdc++.h>
using namespace std;
const int N = 1010, P = 131;

unsigned long long h[N], p[N];
int n, m;
char str[N];

unsigned long long gethash(int l, int r){
	return h[r] - h[l - 1] * p[r - l + 1];
}

int main(){
	scanf("%d %d %s", &n, &m, str + 1);

	p[0] = 1;
	for(int i = 1; i <= n; i++){
		p[i] = p[i - 1] * P;
		h[i] = h[i - 1] * P + str[i];
	}

	int l1, r1, l2, r2;
	while(m--){
		scanf("%d %d %d %d", &l1, &r1, &l2, &r2);
		if(gethash(l1, r1) == gethash(l2, r2)) printf("Yes\n");
		else printf("No\n");
	}

	return 0;
}
```
