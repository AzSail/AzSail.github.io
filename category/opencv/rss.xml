<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>mioe • Posts by &#34;opencv&#34; category</title>
        <link>http://example.com</link>
        <description>花店不开了，花继续开</description>
        <language>zh-CN</language>
        <pubDate>Tue, 04 Oct 2022 15:58:00 +0800</pubDate>
        <lastBuildDate>Tue, 04 Oct 2022 15:58:00 +0800</lastBuildDate>
        <category>BFS</category>
        <category>算法</category>
        <category>unity</category>
        <category>Resilio Sync</category>
        <category>WolfraAlpha</category>
        <category>github</category>
        <category>数论</category>
        <category>linux</category>
        <category>Open-cv</category>
        <category>模板</category>
        <category>碧蓝航线</category>
        <category>Python</category>
        <category>局域网</category>
        <category>阅读</category>
        <category>相册</category>
        <category>算法模板</category>
        <item>
            <guid isPermalink="true">http://example.com/2022/10/04/%E5%9B%BE%E5%83%8F%E7%9A%84%E9%9D%9E%E7%BA%BF%E6%80%A7%E8%BF%90%E7%AE%97%EF%BC%88%E5%AF%B9%E6%95%B0%EF%BC%89/</guid>
            <title>图像的非线性运算（对数）</title>
            <link>http://example.com/2022/10/04/%E5%9B%BE%E5%83%8F%E7%9A%84%E9%9D%9E%E7%BA%BF%E6%80%A7%E8%BF%90%E7%AE%97%EF%BC%88%E5%AF%B9%E6%95%B0%EF%BC%89/</link>
            <pubDate>Tue, 04 Oct 2022 15:58:00 +0800</pubDate>
            <description><![CDATA[ &lt;h2 id=&#34;公式&#34;&gt;&lt;a href=&#34;#公式&#34; class=&#34;headerlink&#34; title=&#34;公式&#34;&gt;&lt;/a&gt;公式&lt;/h2&gt;&lt;p&gt;$$&lt;br&gt;g[i][j] &amp;#x3D; clog_{10}(f[i][j])&lt;/p&gt;
&lt;p&gt;$$&lt;/p&gt;
&lt;h2 id=&#34;代码实现&#34;&gt;&lt;a href=&#34;#代码实现&#34; class=&#34;headerlink&#34; title=&#34;代码实现&#34;&gt;&lt;/a&gt;代码实现&lt;/h2&gt;&lt;pre&gt;&lt;code class=&#34;python&#34;&gt;import cv2,math,skimage
from matplotlib import pyplot as plt
from copy import copy

def change(img, w, l, channel):
    if channel == 3:
        img = skimage.img_as_float(img)
        for i in range(w):
            for j in range(l): 
                for k in range(channel):
                    img[i][j][k] = 2 * math.log((1 + img[i][j][k]), 10)
    elif channel == 2:
        for i in range(w):
            for j in range(l): 
                img[i][j] = 20 * math.log((1 + img[i][j]), 10)
    return img


cat = cv2.imread(&amp;quot;D:\\work\\cv\\1002\\cat.jpg&amp;quot;)
cat = cv2.cvtColor(cat, cv2.COLOR_BGR2GRAY)

change_cat = cat.copy()
# print(change_cat.ndim)
change_cat = change(change_cat, change_cat.shape[0], change_cat.shape[1], change_cat.ndim)

if change_cat.ndim == 3:
    plt.rcParams[&amp;#39;font.family&amp;#39;] = &amp;#39;SimHei&amp;#39; 
    plt.figure(figsize=(10, 8), dpi = 100)
    plt.subplot(121),plt.imshow(cat[:,:,::-1]),plt.title(&amp;#39;原图&amp;#39;)
    plt.subplot(122),plt.imshow(change_cat[:,:,::-1]),plt.title(&amp;#39;调整后&amp;#39;)
    plt.show()
elif change_cat.ndim == 2:
    plt.rcParams[&amp;#39;font.family&amp;#39;] = &amp;#39;SimHei&amp;#39; 
    plt.figure(figsize=(10, 8), dpi = 100)
    plt.subplot(121),plt.imshow(cat, cmap=&amp;#39;gray&amp;#39;),plt.title(&amp;#39;原图&amp;#39;)
    plt.subplot(122),plt.imshow(change_cat, cmap=&amp;#39;gray&amp;#39;),plt.title(&amp;#39;调整后&amp;#39;)
    plt.show()
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;输出：&#34;&gt;&lt;a href=&#34;#输出：&#34; class=&#34;headerlink&#34; title=&#34;输出：&#34;&gt;&lt;/a&gt;输出：&lt;/h3&gt;&lt;p&gt;&lt;img data-src=&#34;https://mioe-xyz.oss-cn-shanghai.aliyuncs.com/usr/uploads/2022/10/2526917559.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">http://example.com/2022/09/27/%E4%BC%BD%E9%A9%AC%E6%A0%A1%E6%AD%A3%E8%A1%A5%E5%81%BF/</guid>
            <title>伽马校正补偿</title>
            <link>http://example.com/2022/09/27/%E4%BC%BD%E9%A9%AC%E6%A0%A1%E6%AD%A3%E8%A1%A5%E5%81%BF/</link>
            <pubDate>Tue, 27 Sep 2022 16:33:00 +0800</pubDate>
            <description><![CDATA[ &lt;h2 id=&#34;伽玛校正&#34;&gt;&lt;a href=&#34;#伽玛校正&#34; class=&#34;headerlink&#34; title=&#34;伽玛校正&#34;&gt;&lt;/a&gt;伽玛校正&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;所谓伽玛校正就是对图像的伽玛曲线进行编辑，以对图像进行非线性色调编辑的方法，检出图像信号中的深色部分和浅色部分，并使两者比例增大，从而提高图像对比度效果。计算机绘图领域惯以此屏幕输出电压与对应亮度的转换关系曲线，称为伽玛曲线（Gamma Curve）。
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img data-src=&#34;https://img-blog.csdnimg.cn/20200626102704679.png&#34; alt=&#34;在这里插入图片描述&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;gamma-补偿的作用&#34;&gt;&lt;a href=&#34;#gamma-补偿的作用&#34; class=&#34;headerlink&#34; title=&#34;gamma 补偿的作用&#34;&gt;&lt;/a&gt;gamma 补偿的作用&lt;/h2&gt;&lt;p&gt;gamma 补偿可以增加图片像素低的部分的对比度，减小图片像素高的部分的对比度。&lt;/p&gt;
&lt;p&gt;也就是图片黑的地方可以看得更清晰，图片亮的地方会变得更模糊。&lt;/p&gt;
&lt;h2 id=&#34;代码实现&#34;&gt;&lt;a href=&#34;#代码实现&#34; class=&#34;headerlink&#34; title=&#34;代码实现&#34;&gt;&lt;/a&gt;代码实现&lt;/h2&gt;&lt;pre&gt;&lt;code class=&#34;python&#34;&gt;import cv2,skimage
import matplotlib.pyplot as plt

def Gamma(img, gamma):
    img = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)		# 转灰度图
    img = skimage.img_as_float(img)			# 转浮点
    return pow(img, gamma)

cat = cv2.imread(&amp;quot;cat.jpg&amp;quot;)

plt.rcParams[&amp;#39;font.family&amp;#39;] = &amp;#39;SimHei&amp;#39;			# 设置字体微软雅黑
plt.figure(figsize = (10, 8),dpi = 100)
for i in range(0, 8):
    plt.subplot(int(241 + i))
    plt.imshow(Gamma(cat, i / 4), cmap=&amp;#39;gray&amp;#39;)
    plt.title(&amp;#39;gamma:&amp;#39;+str(i / 4))
plt.show()

cv2.waitKey()
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;运行结果&#34;&gt;&lt;a href=&#34;#运行结果&#34; class=&#34;headerlink&#34; title=&#34;运行结果&#34;&gt;&lt;/a&gt;运行结果&lt;/h3&gt;&lt;p&gt;&lt;img data-src=&#34;https://mioe-xyz.oss-cn-shanghai.aliyuncs.com/usr/uploads/2022/10/956158489.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">http://example.com/2022/09/25/%E5%9B%BE%E7%89%87%E8%AE%A1%E7%AE%97/</guid>
            <title>图片计算</title>
            <link>http://example.com/2022/09/25/%E5%9B%BE%E7%89%87%E8%AE%A1%E7%AE%97/</link>
            <category>Open-cv</category>
            <pubDate>Sun, 25 Sep 2022 17:34:00 +0800</pubDate>
            <description><![CDATA[ &lt;h3 id=&#34;直接加运算&#34;&gt;&lt;a href=&#34;#直接加运算&#34; class=&#34;headerlink&#34; title=&#34;直接加运算&#34;&gt;&lt;/a&gt;直接加运算&lt;/h3&gt;&lt;p&gt;&lt;code&gt;img += 10&lt;/code&gt; 每项rgb数值都加10，溢出部分会自动&lt;code&gt;% 255&lt;/code&gt;处理&lt;/p&gt;
&lt;h3 id=&#34;cv2-add&#34;&gt;&lt;a href=&#34;#cv2-add&#34; class=&#34;headerlink&#34; title=&#34;cv2.add&#34;&gt;&lt;/a&gt;&lt;code&gt;cv2.add&lt;/code&gt;&lt;/h3&gt;&lt;p&gt;&lt;code&gt;cv2.add(img, img1)&lt;/code&gt;溢出部分将自动处理为255&lt;/p&gt;
&lt;h3 id=&#34;cv2-addaddWeighted&#34;&gt;&lt;a href=&#34;#cv2-addaddWeighted&#34; class=&#34;headerlink&#34; title=&#34;cv2.addaddWeighted&#34;&gt;&lt;/a&gt;&lt;code&gt;cv2.addaddWeighted&lt;/code&gt;&lt;/h3&gt;&lt;p&gt;&lt;code&gt;cv2.addWeighted(src1, alpha, src2, beta, gamma[, dst[, dtype]]) → dst&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;scr1, scr2：ndarray 多维数组，表示一个灰度或彩色图像&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;alpha：第一张图像 scr1 的权重，通常取为 0～1 之间的浮点数&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;beta：第二张图像 scr2 的权重，通常取为 0～1 之间的浮点数&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;gamma： 灰度系数，图像校正的偏移量，用于调节亮度&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;dtype 输出图像的深度，即每个像素值的位数，可选项，默认等于 src1.depth()&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;retrun：dst，加权加法运算结果的图像数组&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;https://mioe-xyz.oss-cn-shanghai.aliyuncs.com/usr/uploads/2022/09/3016520072.png&#34; alt=&#34;image.png&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">http://example.com/2022/09/24/%E5%9B%BE%E5%83%8F%E5%A1%AB%E5%85%85/</guid>
            <title>图像填充</title>
            <link>http://example.com/2022/09/24/%E5%9B%BE%E5%83%8F%E5%A1%AB%E5%85%85/</link>
            <pubDate>Sat, 24 Sep 2022 13:15:00 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;函数&#34;&gt;&lt;a href=&#34;#函数&#34; class=&#34;headerlink&#34; title=&#34;函数&#34;&gt;&lt;/a&gt;函数&lt;/h1&gt;&lt;p&gt;&lt;code&gt;cv2.copyMakeBorder(src, top, bottom, left, right, borderType, value)&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;borderType：填充类型&lt;/li&gt;
&lt;li&gt;value：可选参数&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;borderType&#34;&gt;&lt;a href=&#34;#borderType&#34; class=&#34;headerlink&#34; title=&#34;borderType&#34;&gt;&lt;/a&gt;borderType&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;cv2.BORDER_REPLICATE&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cv2.BORDER_REFLECT&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cv2.BORDER_REFLECT101&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cv2.BORDER_CONSTANT&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cv2.BORDER_WRAP&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">http://example.com/2022/09/24/IMG%E6%95%B0%E7%BB%84%E7%9B%B8%E5%85%B3/</guid>
            <title>IMG数组相关</title>
            <link>http://example.com/2022/09/24/IMG%E6%95%B0%E7%BB%84%E7%9B%B8%E5%85%B3/</link>
            <pubDate>Sat, 24 Sep 2022 11:43:00 +0800</pubDate>
            <description><![CDATA[ &lt;p&gt;图片ROI区域选取：&lt;code&gt;img[0:100,0:100]&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;py&#34;&gt;img[垂直区域, 水平区域, 颜色通道]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;注：&lt;code&gt;cv2.imread()&lt;/code&gt;读取顺序是BGR&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;取单通道值：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;python&#34;&gt;# 将G,B通道写入0
img[:,:,0] = 0
img[:,:,1] = 0
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;垂直翻转：&lt;code&gt;img[::-1,:]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;水平翻转：&lt;code&gt;img[:,::-1]&lt;/code&gt;&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">http://example.com/2022/09/20/cv%E5%9F%BA%E7%A1%80%E7%9B%B8%E5%85%B3%E4%B8%8Efloat_uint8%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/</guid>
            <title>cv基础相关与float/uint8类型转换</title>
            <link>http://example.com/2022/09/20/cv%E5%9F%BA%E7%A1%80%E7%9B%B8%E5%85%B3%E4%B8%8Efloat_uint8%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/</link>
            <pubDate>Tue, 20 Sep 2022 23:37:00 +0800</pubDate>
            <description><![CDATA[ &lt;h3 id=&#34;cv基本&#34;&gt;&lt;a href=&#34;#cv基本&#34; class=&#34;headerlink&#34; title=&#34;cv基本&#34;&gt;&lt;/a&gt;cv基本&lt;/h3&gt;&lt;pre&gt;&lt;code class=&#34;python&#34;&gt;img = cv2.imread(&amp;quot;Path&amp;quot;)    #打开图片
cv2 = imshow(&amp;quot;窗口标题&amp;quot;, img)	#显示
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;resize&#34;&gt;&lt;a href=&#34;#resize&#34; class=&#34;headerlink&#34; title=&#34;resize()&#34;&gt;&lt;/a&gt;resize()&lt;/h3&gt;&lt;pre&gt;&lt;code class=&#34;python&#34;&gt;dst = cv2.resize(src,dsize,dst=None,fx=None,fy=None,interpolation=None)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;src&lt;/strong&gt;：输入图像&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;dsize&lt;/strong&gt;：输出图像的大小。如果该参数为 0，表示缩放之后的大小需要通过公式计算，&lt;code&gt;dsize = Size(round(fx*src.cols),round(fy*src.rows))&lt;/code&gt;。其中 &lt;code&gt;fx&lt;/code&gt; 与 &lt;code&gt;fy&lt;/code&gt; 是图像 Width 方向和 Height 方向的缩放比例。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;fx&lt;/strong&gt;：Width 方向的缩放比例，如果是 0，按照 &lt;code&gt;dsize * width/src.cols&lt;/code&gt; 计算&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;fy&lt;/strong&gt;：Height 方向的缩放比例，如果是 0，按照 &lt;code&gt;dsize * height/src.rows&lt;/code&gt; 计算&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;interpolation&lt;/strong&gt;：插值算法类型，或者叫做插值方式，默认为双线性插值&lt;/li&gt;
&lt;li&gt;方法返回结果 dst 表示输出图像。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;相关参数&#34;&gt;&lt;a href=&#34;#相关参数&#34; class=&#34;headerlink&#34; title=&#34;相关参数&#34;&gt;&lt;/a&gt;相关参数&lt;/h3&gt;&lt;pre&gt;&lt;code class=&#34;python&#34;&gt;a=cv2.imread(&amp;quot;1.jpg&amp;quot;)
print(a.shape[0], a.shape[1], a.shape[2])
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;shape0 : 垂直尺寸&lt;/p&gt;
&lt;p&gt;shape1 : 水平尺寸&lt;/p&gt;
&lt;p&gt;shape2 : 颜色通道&lt;/p&gt;
&lt;h3 id=&#34;数据类型查看与转换&#34;&gt;&lt;a href=&#34;#数据类型查看与转换&#34; class=&#34;headerlink&#34; title=&#34;数据类型查看与转换&#34;&gt;&lt;/a&gt;数据类型查看与转换&lt;/h3&gt;&lt;h5 id=&#34;type-dtype-astype-区别&#34;&gt;&lt;a href=&#34;#type-dtype-astype-区别&#34; class=&#34;headerlink&#34; title=&#34;type() ,dtype() ,astype()区别&#34;&gt;&lt;/a&gt;type() ,dtype() ,astype()区别&lt;/h5&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;函数&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;type()&lt;/td&gt;
&lt;td&gt;返回数据结构类型（list、dict、numpy、ndarray 等）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;dtype()&lt;/td&gt;
&lt;td&gt;返回数据元素的数据类型（int、float等）&lt;br /&gt;备注：&lt;br /&gt;1）由于 list、dict 等可以包含不同的数据类型，因此不可调用dtype()函数&lt;br /&gt;2）np.array 中要求所有元素属于同一数据类型，因此可调用dtype()函数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;astype()&lt;/td&gt;
&lt;td&gt;改变np.array中所有数据元素的数据类型。&lt;br /&gt;备注：能用dtype() 才能用 astype()&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h5 id=&#34;类型转换&#34;&gt;&lt;a href=&#34;#类型转换&#34; class=&#34;headerlink&#34; title=&#34;类型转换&#34;&gt;&lt;/a&gt;类型转换&lt;/h5&gt;&lt;p&gt;方法1：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;python&#34;&gt;# 通过np转换类型后除以255得到float类型
a = a.astype(np.float32)
a/=255.0
print(a)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;方法2：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;python&#34;&gt;# 直接使用skimage转换
a = skimage.img_as_float(a)  #默认为float64，可选img_as_float32
&lt;/code&gt;&lt;/pre&gt;
 ]]></description>
        </item>
    </channel>
</rss>
