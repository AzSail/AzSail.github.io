{
    "version": "https://jsonfeed.org/version/1",
    "title": "書架 • All posts by \"linux\" tag",
    "description": "花店不开了，花继续开",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/2022/04/13/%E5%8D%B8%E8%BD%BDLinux%E5%9B%BE%E5%BD%A2%E6%A1%8C%E9%9D%A2/",
            "url": "http://example.com/2022/04/13/%E5%8D%B8%E8%BD%BDLinux%E5%9B%BE%E5%BD%A2%E6%A1%8C%E9%9D%A2/",
            "title": "卸载Linux图形桌面",
            "date_published": "2022-04-13T04:55:00.000Z",
            "content_html": "<pre><code>yum groupremove &quot;GNOME Desktop Environment&quot; -y\n\nyum groupremove &quot;X window System&quot; -y\n</code></pre>\n",
            "tags": [
                "linux"
            ]
        },
        {
            "id": "http://example.com/2022/04/13/%E5%9F%BA%E4%BA%8ELinux-Anaconda%E9%83%A8%E7%BD%B2AzurLaneAutoScript/",
            "url": "http://example.com/2022/04/13/%E5%9F%BA%E4%BA%8ELinux-Anaconda%E9%83%A8%E7%BD%B2AzurLaneAutoScript/",
            "title": "基于Linux-Anaconda部署AzurLaneAutoScript",
            "date_published": "2022-04-13T01:59:00.000Z",
            "content_html": "<h1 id=\"在-linux-上部署-azurlaneautoscript\"><a class=\"markdownIt-Anchor\" href=\"#在-linux-上部署-azurlaneautoscript\">#</a> 在 Linux 上部署 AzurLaneAutoScript</h1>\n<h2 id=\"anaconda相关\"><a class=\"markdownIt-Anchor\" href=\"#anaconda相关\">#</a> Anaconda 相关</h2>\n<h3 id=\"下载anaconda3\"><a class=\"markdownIt-Anchor\" href=\"#下载anaconda3\">#</a> 下载 anaconda3</h3>\n<pre><code>wget https://repo.continuum.io/archive/Anaconda3-5.2.0-Linux-x86_64.shanaconda\n</code></pre>\n<h3 id=\"修改权限\"><a class=\"markdownIt-Anchor\" href=\"#修改权限\">#</a> 修改权限</h3>\n<pre><code>chmod +x Anaconda3-5.2.0-Linux-x86_64.sh\n</code></pre>\n<h3 id=\"安装\"><a class=\"markdownIt-Anchor\" href=\"#安装\">#</a> 安装</h3>\n<pre><code>./Anaconda3-5.2.0-Linux-x86_64.sh\n# 一路yes&amp;enter\n</code></pre>\n<h2 id=\"拉取alas\"><a class=\"markdownIt-Anchor\" href=\"#拉取alas\">#</a> 拉取 Alas</h2>\n<p>移动到欲安装 alas 目录下，git 整个仓库</p>\n<pre><code>cd /home\ngit clone https://github.com/LmeSzinc/AzurLaneAutoScript.git\n# 如果下载速度缓慢，可换用gitee\n</code></pre>\n<h2 id=\"安装依赖\"><a class=\"markdownIt-Anchor\" href=\"#安装依赖\">#</a> 安装依赖</h2>\n<h3 id=\"python环境\"><a class=\"markdownIt-Anchor\" href=\"#python环境\">#</a> python 环境</h3>\n<pre><code>conda create -n alas python=3.7.6\nconda activate alas\ncd AzurLaneAutoScript\npip install -r requirements-in.txt -i https://pypi.tuna.tsinghua.edu.cn/simple\n# 可换用其他源\n</code></pre>\n<blockquote>\n<p>由于某些 python 库在不同 os 下的依赖不同，直接从 requirements-in.txt 安装即可，pip 会自动处理依赖。当然也可以从 requirements.txt 安装，但是需注释掉 pywin32</p>\n</blockquote>\n<h3 id=\"adb\"><a class=\"markdownIt-Anchor\" href=\"#adb\">#</a> adb</h3>\n<p>下载 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vc3R1ZGlvL3JlbGVhc2VzL3BsYXRmb3JtLXRvb2xz\">SDK Platform Tools for Linux</span> 并解压，将 adb 放在 <code>/usr/bin</code>  目录下</p>\n<h3 id=\"uiautomator2\"><a class=\"markdownIt-Anchor\" href=\"#uiautomator2\">#</a> uiautomator2</h3>\n<p>若运行 alas 后无法正常初始化 uiautomator2，可按此方法手动安装，安装过程参考 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL29wZW5hdHgvdWlhdXRvbWF0b3Iy\">uiautomator2</span></p>\n<p>运行  <code>adb connect &lt;address&gt;</code>  连接你的云手机，确保运行  <code>adb device</code>  后可以看到设备</p>\n<p>在 alas python 环境下运行  <code>python</code>  打开 python 命令行窗口，输入以下命令</p>\n<pre><code>import uiautomator2 as u2\n\nd = u2.connect() # connect to device\nprint(d.info)\n</code></pre>\n<p>等待一段时间，输出类似如下内容，说明安装成功</p>\n<pre><code>&#123;'currentPackageName': 'net.oneplus.launcher', 'displayHeight': 1920, 'displayRotation': 0, 'displaySizeDpX': 411, 'displaySizeDpY': 731, 'displayWidth': 1080, 'productName': 'OnePlus5', '\nscreenOn': True, 'sdkInt': 27, 'naturalOrientation': True&#125;\n</code></pre>\n<h3 id=\"修改deployyaml\"><a class=\"markdownIt-Anchor\" href=\"#修改deployyaml\">#</a> 修改 deploy.yaml</h3>\n<p>因为 Alas 默认使用了 Windows 下的配置文件，所以我们要手动修改</p>\n<pre><code># 修改gitee仓库\nDeploy.Git.Repository : https://gitee.com/LmeSzinc/AzurLaneAutoScript\n\n# git位置\nDeploy.Git.GitExecutable : /usr/bin/git\n\n# python位置\nDeploy.Python.PythonExecutable : [Anaconda安装路径]/envs/alas/bin/python\n\n# adb位置\nDeploy.Adb.AdbExecutable : /usr/bin/adb\n</code></pre>\n<h2 id=\"使用-shell-脚本启动停止-alas\"><a class=\"markdownIt-Anchor\" href=\"#使用-shell-脚本启动停止-alas\">#</a> 使用 shell 脚本启动停止 alas</h2>\n<p>编写脚本</p>\n<pre><code>#!/bin/bash\n\nstart()&#123;\n    source &lt;conda_path&gt;/bin/activate alas # &lt;miniconda_path&gt; 替换为实际 conda 安装路径\n    cd &lt;AzurLaneAutoScript_path&gt; # &lt;AzurLaneAutoScript_path&gt; 替换为 alas 路径\n    git pull origin master\n    nohup python gui.py &gt;/dev/nul 2&gt;&amp;1 &amp;\n    echo &quot;start alas&quot;\n&#125;\n\nstop()&#123;\n    kill -9 $(pgrep -f alas) \n    echo &quot;kill alas&quot;\n&#125;\n\ncase $1 in\n    &quot;start&quot; ) start;;\n    &quot;stop&quot; ) stop;;\n    * ) stop;start;;\nesac\n</code></pre>\n<p>将文件保存为 alas，放在 <code>/usr/bin</code> ，修改权限</p>\n<pre><code>chmod 755 alas\n</code></pre>\n<p>可用以下命令控制 alas</p>\n<pre><code>alas start # 启动\nalas stop # 停止\nalas # 重启\n</code></pre>\n<h2 id=\"遇到一些问题\"><a class=\"markdownIt-Anchor\" href=\"#遇到一些问题\">#</a> 遇到一些问题</h2>\n<h3 id=\"errorpermission-denied\"><a class=\"markdownIt-Anchor\" href=\"#errorpermission-denied\">#</a> ERROR:Permission denied</h3>\n<pre><code># 权限相关问题，激活环境时用以下代码\nsource activate alas\n</code></pre>\n<h3 id=\"errorconda-command-not-found\"><a class=\"markdownIt-Anchor\" href=\"#errorconda-command-not-found\">#</a> ERROR:Conda command not found</h3>\n<pre><code># 打开系统变量\nvim ~/.bashrc\n\n# 添加系统变量\nexport PATH=/[path]/anaconda3/bin:$PATH # [path]为anaconda3的安装路径\n\n#重新加载配置\nsource ~/.bashrc\n</code></pre>\n<h3 id=\"errorxxx-is-not-a-trusted-or-secure-host\"><a class=\"markdownIt-Anchor\" href=\"#errorxxx-is-not-a-trusted-or-secure-host\">#</a> ERROR:XXX is not a trusted or secure host</h3>\n<pre><code>pip install 库包名 -i http://pypi.douban.com/simple/ --trusted-host pypi.douban.com\n# 这里将pip源换成清华源、阿里源等都适用。\n</code></pre>\n<hr>\n<h2 id=\"总结\"><a class=\"markdownIt-Anchor\" href=\"#总结\">#</a> 总结</h2>\n<p>感谢 Lme 大佬的 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL0xtZVN6aW5jL0F6dXJMYW5lQXV0b1NjcmlwdA==\">AzurLaneAutoScript</span> <s>MAGA 让碧蓝航线再次伟大！</s></p>\n<p>教程参考了群内大佬 <strong><span class=\"exturl\" data-url=\"aHR0cDovL3huLS1BbGFzLXl3Nms5ODdmLm1k\">Alas 部署.md</span> - freesrz</strong></p>\n<p>再一次感谢各位群大佬</p>\n",
            "tags": [
                "linux",
                "碧蓝航线",
                "Python"
            ]
        }
    ]
}